
<!DOCTYPE html>
<html>
  <head>
    
<meta charset="utf-8" >

<title>Django的开发中遇到的一些问题以及解决方案，包括Django-xadmin的优化 | WuXin</title>
<meta name="description" content="成千上万个门口，总有一个人要先走。">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://906571331.github.io/yx.github.io//favicon.ico?v=1587199752528">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://906571331.github.io/yx.github.io//styles/main.css">



<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



  </head>
  <body>
    <div id="app" class="main">
      <div class="site-header-container">
  <div class="site-header">
    <div class="left">
      <a href="https://906571331.github.io/yx.github.io/">
        <img class="avatar" src="https://906571331.github.io/yx.github.io//images/avatar.png?v=1587199752528" alt="" width="32px" height="32px">
      </a>
      <a href="https://906571331.github.io/yx.github.io/">
        <h1 class="site-title">WuXin</h1>
      </a>
    </div>
    <div class="right">
      <transition name="fade">
        <i class="icon" :class="{ 'icon-close-outline': menuVisible, 'icon-menu-outline': !menuVisible }" @click="menuVisible = !menuVisible"></i>
      </transition>
    </div>
  </div>
</div>

<transition name="fade">
  <div class="menu-container" style="display: none;" v-show="menuVisible">
    <div class="menu-list">
      
        
          <a href="https://906571331.github.io/yx.github.io/" class="menu purple-link">
            首页
          </a>
        
      
        
          <a href="/archives" class="menu purple-link">
            归档
          </a>
        
      
        
          <a href="https://906571331.github.io/yx.github.io/tags" class="menu purple-link">
            标签
          </a>
        
      
        
          <a href="https://906571331.github.io/yx.github.io/post/about" class="menu purple-link">
            关于
          </a>
        
      
    </div>
  </div>
</transition>


      <div class="content-container">
        <div class="post-detail">
          
            <div class="feature-container" style="background-image: url('https://906571331.github.io/yx.github.io//post-images/django-de-kai-fa-zhong-yu-dao-de-yi-xie-wen-ti-yi-ji-jie-jue-fang-an-bao-gua-django-xadmin-de-you-hua.jpg')">
            </div>
          
          <h2 class="post-title">Django的开发中遇到的一些问题以及解决方案，包括Django-xadmin的优化</h2>
          <div class="post-info post-detail-info">
            <span><i class="icon-calendar-outline"></i> 2020-04-15</span>
            
              <span>
                <i class="icon-pricetags-outline"></i>
                
                  <a href="https://906571331.github.io/yx.github.io/tag/IOUFjN4sc/">
                    解决问题
                    
                      ，
                    
                  </a>
                
                  <a href="https://906571331.github.io/yx.github.io/tag/sR-2jrK5Z/">
                    Django
                    
                  </a>
                
              </span>
            
          </div>
          <div class="post-content">
            <h4 id="1python报错">1.Python报错：</h4>
<pre><code class="language-Python">   	from django.urls import path, include
ImportError: cannot import name 'path'
</code></pre>
<p>解决方法：可能是Django的版本问题，查看当前虚拟环境的Django版本</p>
<pre><code class="language-python">import django
django._get_version()
</code></pre>
<p>如果Django的版本低于之前的版本，使用pip install django==版本号<br>
升级Django到对应的版本</p>
<h4 id="2django中引入写好的文件即服务器不需要传入任何参数只需修改urlspy其他不用修改用途编写abouthtml">2.django中引入写好的文件，即服务器不需要传入任何参数,只需修改urls.py，其他不用修改，用途：编写about.html</h4>
<pre><code class="language-python">#urls.py
from django.views.generic import TemplateView
path(&quot;about/&quot;,TemplateView.as_view(template_name=&quot;about.html&quot;)),
</code></pre>
<h4 id="3ubuntu中python环境下载mysqlclient出错">3.ubuntu中Python环境下载mysqlclient出错：</h4>
<pre><code class="language-python">x86_64-linux-gnu-gcc -pthread -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fno-strict-aliasing -D_FORTIFY_SOURCE=2 -g -fstack-protector-strong -Wformat -Werror=format-security -fPIC -I/tmp/pip-build-Hqt4sF/lxml/src/lxml/includes -I/usr/include/python2.7 -c src/lxml/lxml.etree.c -o build/temp.linux-x86_64-2.7/src/lxml/lxml.etree.o -w

In file included from src/lxml/lxml.etree.c:239:0:

/tmp/pip-build-Hqt4sF/lxml/src/lxml/includes/etree_defs.h:14:31: fatal error: libxml/xmlversion.h: No such file or directory

compilation terminated.

error: command 'x86_64-linux-gnu-gcc' failed with exit status 1

----------------------------------------
  Can't roll back lxml; was not uninstalled
Cleaning up...
Command /usr/bin/python -c &quot;import setuptools, tokenize;__file__='/tmp/pip-build-Hqt4sF/lxml/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))&quot; install --record /tmp/pip-tUvZhB-record/install-record.txt --single-version-externally-managed --compile failed with error code 1 in /tmp/pip-build-Hqt4sF/lxml
Storing debug log for failure in /home/aaa/.pip/pip.log
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://img-blog.csdnimg.cn/20200411085849604.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDkyMDc2,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" loading="lazy"></figure>
<pre><code class="language-python">sudo apt-get install mysql-server mysql-client
#然后mysql -V查看mysql是否安装成功
sudo  apt-get install libmysqlclient-dev python3-dev
#然后
pip install mysqlclient就不会报错找不到'mysql_config'了
</code></pre>
<h4 id="4创建数据库时设定默认编码为utf8">4.创建数据库时设定默认编码为utf8:</h4>
<pre><code class="language-mysql"> create database db_name default charset utf8 collate utf8_general_ci;
</code></pre>
<h4 id="下载django时指定国内的下载源">下载Django时指定国内的下载源：</h4>
<pre><code class="language-python">pip install django==2.1.7 -i https://pypi.douban.com/simple
</code></pre>
<h4 id="5modulenotfounderror-no-module-named-import_export">5.ModuleNotFoundError: No module named 'import_export'</h4>
<p>安装这个库</p>
<pre><code class="language-python">pip install django-import-export
#不能简单的安装import_export
</code></pre>
<p>并且在settings.py中注册这个app</p>
<pre><code class="language-python">INSTALLED_APPS = [
	'import_export',
]
</code></pre>
<p>xadmin安装时需要注册的两个app</p>
<pre><code class="language-python">INSTALLED_APPS = [
	'xadmin',
    'crispy_forms',
]
</code></pre>
<h4 id="6在pip安装时指定源的方法">6.在pip安装时，指定源的方法：</h4>
<h5 id="国内常用源列表">国内常用源列表</h5>
<p>清华大学 https://pypi.tuna.tsinghua.edu.cn/simple<br>
中国科学技术大学 http://pypi.mirrors.ustc.edu.cn/simple<br>
阿里云 http://mirrors.aliyun.com/pypi/simple<br>
中国科技大学 https://pypi.mirrors.ustc.edu.cn/simple<br>
豆瓣 (douban) http://pypi.douban.com/simple<br>
1.安装时临时指定国内源</p>
<pre><code class="language-python">pip3 install sweetest  -i https://pypi.tuna.tsinghua.edu.cn/simple
如果提示 host 不被信任可以加上参数 –trusted-host
pip3 install sweetest  -i https://pypi.tuna.tsinghua.edu.cn/simple --trusted-host  pypi.tuna.tsinghua.edu.cn
</code></pre>
<h4 id="7django-settingspy中设置为中文">7.django settings.py中设置为中文</h4>
<pre><code class="language-python">LANGUAGE_CODE = 'zh-hans'
TIME_ZONE = 'Asia/Shanghai'
USE_I18N = True
USE_L10N = True
USE_TZ = True
</code></pre>
<h4 id="8xadmin中的设置">8.xadmin中的设置</h4>
<pre><code class="language-python">#导入xadmin
import xadmin
#从当前的app中导入模型，以及模型中的类
from .models import Book,Category,Article
#定义全局，site_title为左上角的标题，site_footer为中间最下方的@后的文字
class Globlesettings(object):
    site_title=&quot;后台管理页面&quot;
    site_footer=&quot;后台管理页面所有&quot;
    #左侧菜单栏是否可以重叠
    menu_style = &quot;accordion&quot;
#设置xadmin中的主体
class Basesettings(object):
	#enable_themes设置为true时，只显示主题图表与Bootstrap2一个主体
    enable_themes=True
    #use_bootswatch=True时，可以显示很多种主题
    use_bootswatch=True
class BookAdmin(object):
	#可以显示的列
    list_display=[&quot;id&quot;,&quot;name&quot;,&quot;author&quot;]
    #查找的设置
    search_fields=[&quot;id&quot;,&quot;name&quot;,&quot;author&quot;]
    #过滤器的设置
    list_filter=[&quot;id&quot;,&quot;name&quot;,&quot;author&quot;]
    #可以在当前页面编辑的列
    list_editable=[&quot;name&quot;,&quot;author&quot;]
    model_icon=&quot;fa fa-bath&quot;
</code></pre>
<h4 id="9models中的配置">9.models中的配置</h4>
<pre><code class="language-python">    class Meta:
        #模型的名字
        verbose_name=&quot;文章&quot;
        #复数时显示以前的名字，不添加s
        verbose_name_plural=verbose_name
    def __str__(self):
        return self.name
</code></pre>
<h4 id="10要使后台管理系统中在左侧的名字显示为中文名设置方法如下">10.要使后台管理系统中在左侧的名字显示为中文名，设置方法如下：</h4>
<pre><code class="language-python">#settings.py
INSTALLED_APPS = [
	'article.apps.ArticleConfig',
]
#article/apps.py
class ArticleConfig(AppConfig):
    name = 'article'
    verbose_name = &quot;文章模块&quot;
</code></pre>
<h4 id="11xadmin重定向页面">11.xadmin重定向页面：</h4>
<pre><code class="language-python">#adminx.py
class ChangeIntoAdmin(object):
    # 指向自定义的页面
    object_list_template = 'base111.html'
    # 重写方法，把要展示的数据更新到 context
    def get_context(self):
        context = CommAdminView.get_context(self)
        bill_message = Book.objects.all()
        context.update(
            {
                'title': '转入分析',
            }
        )
        return context
xadmin.site.register(Book, ChangeIntoAdmin)
</code></pre>

          </div>
        </div>

        
          <div class="next-post">
            <a class="purple-link" href="https://906571331.github.io/yx.github.io/post/django-xue-xi-bi-ji-shu-ju-ku-er/">
              <h3 class="post-title">
                下一篇：Django学习笔记数据库（二）
              </h3>
            </a>
          </div>
          
      </div>

      

      <div class="site-footer">
  <div class="slogan">成千上万个门口，总有一个人要先走。</div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
  Powered by <a href="https://blog.csdn.net/qq_42092076" target="_blank">Gridea</a> | <a class="rss" href="https://906571331.github.io/yx.github.io//atom.xml" target="_blank">RSS</a>
</div>


    </div>
    <script type="application/javascript">

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>




  </body>
</html>
